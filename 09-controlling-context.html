<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>控制上下文 | Claude Code 实战课程</title>
    <script src="head-meta.js"></script>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="site-header">
      <div class="container">
        <a class="brand" href="index.html">Claude Code 实战课程（中文）</a>
        <span class="subtitle">第 09 节 · 控制上下文</span>
      </div>
    </header>

<div class="layout">
<aside class="sidebar" id="sidebar"></aside>
  <div class="main">

    <nav class="lesson-nav container"></nav>

    <main class="container content">
      <div class="content-card">
        <h1>控制上下文</h1>
        <div class="lesson-meta">
          原文链接：
          <a href="https://anthropic.skilljar.com/claude-code-in-action/303237"
            >https://anthropic.skilljar.com/claude-code-in-action/303237</a
          >
          <span class="tag">视频 + 讲义</span>
        </div>
        <div class="content-body">
          <p>
            处理复杂任务时，你经常需要引导对话保持聚焦。下面这些技巧可以帮助你控制对话流，避免 Claude 走偏。
          </p>

          <h2>用 Esc 中断 Claude</h2>
          <p>
            当 Claude 开始偏离方向或一次性处理过多任务时，你可以按 Esc 中断它的响应，随后重新明确目标。
          </p>
          <p>
            例如你让 Claude 为多个函数写测试，它可能开始规划整套测试体系。此时按 Esc，中断后让它先写一个函数的测试。
          </p>

          <h2>Esc + 记忆的组合</h2>
          <p>Esc 的一个强大用途是修复重复性错误：</p>
          <ul>
            <li>按 Esc 停止当前回复</li>
            <li>用 <code>#</code> 添加一条记忆（正确的做法）</li>
            <li>继续对话，让 Claude 按新记忆执行</li>
          </ul>
          <p>这样可以避免 Claude 在未来对话中重复同样的错误。</p>

          <h2>回退对话</h2>
          <p>
            长对话容易积累大量无关上下文。例如排错过程可能对下一任务无用。此时可以按 Esc 两次“回退对话”：
          </p>
          <ul>
            <li>保留有价值的上下文（例如对代码库的理解）</li>
            <li>删除无用或干扰性的对话内容</li>
            <li>让 Claude 专注于当前任务</li>
          </ul>

          <h2>上下文管理命令</h2>
          <p>Claude 提供了几个专门管理上下文的命令：</p>

          <h3>/compact</h3>
          <p>
            <code>/compact</code> 会总结整个对话并保留关键要点。适用于：
          </p>
          <ul>
            <li>Claude 已学习到项目的重要信息</li>
            <li>你要继续相关任务但希望对话更短</li>
            <li>对话变长但仍有价值信息需要保留</li>
          </ul>

          <h3>/clear</h3>
          <p>
            <code>/clear</code> 会清空对话上下文，适用于：
          </p>
          <ul>
            <li>切换到完全不相关的新任务</li>
            <li>旧上下文可能干扰新任务</li>
            <li>需要彻底重来</li>
          </ul>

          <h2>何时使用这些技巧</h2>
          <p>这些控制技巧特别适用于：</p>
          <ul>
            <li>长对话导致上下文杂乱</li>
            <li>任务切换时担心上下文干扰</li>
            <li>Claude 重复犯错</li>
            <li>复杂项目需要保持聚焦</li>
          </ul>
          <p>
            灵活使用 Esc、中断回退、<code>/compact</code> 与 <code>/clear</code>，可以让 Claude 在开发流程中保持高效
            与专注。这些不是小技巧，而是高质量 AI 开发会话的基础能力。
          </p>
        </div>
      </div>
    </main>

    <footer class="site-footer container">
      下一节：<a href="10-custom-commands.html">自定义命令</a>
    </footer>
    </div>
</div>
<script src="nav-data.js"></script>
<script src="sidebar.js"></script>
<script src="nav.js"></script>
</body>
</html>

